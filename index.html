<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fetch OGAds Offers</title>
</head>
<body>
    <h1>OGAds Offers</h1>
    <pre id="output"></pre>

    <script>
        async function fetchOffers() {
            try {
                // Step 1: Get user's IP from a public API (no key needed)
                const ipResponse = await fetch('https://api.ipify.org?format=json');
                const ipData = await ipResponse.json();
                const userIp = ipData.ip;

                // Step 2: Get user's User-Agent
                const userAgent = navigator.userAgent;

                // Step 3: Build the OGAds API URL with parameters
                const apiUrl = new URL('https://unlockcontent.net/api/v2');
                apiUrl.searchParams.append('ip', userIp);
                apiUrl.searchParams.append('user_agent', userAgent);
                apiUrl.searchParams.append('ctype', '1');  // Adjust as needed
                apiUrl.searchParams.append('limit', '10'); // Optional: Limit to 10 offers

                // Step 4: Make the request with Bearer auth
                const response = await fetch(apiUrl, {
                    method: 'GET',
                    headers: {
                        'Authorization': 'Bearer 34829|nJfCK9PNtqv8s0cqEl943LhDfd3ufQMGcNc2ZdCT429ec4af'
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                // Step 5: Parse the JSON response
                const data = await response.json();

                // Display the raw JSON (offers array with details like name, payout, url, etc.)
                document.getElementById('output').textContent = JSON.stringify(data, null, 2);
                console.log(data);  // For debugging in console
            } catch (error) {
                console.error('Error fetching offers:', error);
                document.getElementById('output').textContent = 'Error: ' + error.message;
            }
        }

        // Run the function on page load
        fetchOffers();
    </script>
</body>
</html>
