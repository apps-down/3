<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OGAds Offerwall</title>
<style>
  body { font-family: Arial, sans-serif; background: #f2f5ff; margin: 0; padding: 20px; }
  h1 { color: #1446FF; text-align: center; }
  #offerList { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin-top: 20px; }
  .offer-card { background: #fff; border-radius: 12px; padding: 16px; box-shadow: 0 4px 14px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s ease; }
  .offer-card:hover { transform: scale(1.03); }
  .offer-title { font-weight: bold; margin-bottom: 8px; color: #1446FF; }
  .offer-desc { font-size: 14px; color: #000; }
</style>
</head>
<body>
<h1>Complete Offers</h1>
<div id="offerList">Loading offers...</div>

<script>
const API_KEY = "34827|a2NfXQDl9EjEnyKUfAkFWNdjhlvT5TM4ExCnEpP985f9062f";
const API_URL = "https://lockerpreview.com/api/v2";

async function getVisitorIP() {
  try {
    const res = await fetch("https://api.ipify.org?format=json");
    const data = await res.json();
    return data.ip || "0.0.0.0";
  } catch (e) {
    return "0.0.0.0";
  }
}

async function fetchOffers() {
  const offerList = document.getElementById("offerList");
  offerList.innerHTML = "Loading offers...";

  const ip = await getVisitorIP();
  const userAgent = navigator.userAgent;

  const bodyData = {
    ip: ip,
    user_agent: userAgent,
    ctype: 7, // 1+CPI + 2+CPA + 4+PIN (adjust as needed)
    max: 20
  };

  try {
    const res = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + API_KEY
      },
      body: JSON.stringify(bodyData)
    });

    const data = await res.json();
    const offers = data.offers || [];
    if (!offers.length) {
      offerList.innerHTML = "<p>No offers available.</p>";
      return;
    }

    offerList.innerHTML = "";
    offers.forEach((offer, idx) => {
      const card = document.createElement("div");
      card.className = "offer-card";
      card.innerHTML = `
        <div class="offer-title">${offer.offer_name || offer.name || "Offer " + (idx+1)}</div>
        <div class="offer-desc">${offer.description || offer.offer_desc || "Complete this offer to earn rewards"}</div>
      `;
      card.onclick = () => {
        if (offer.offerlink) window.open(offer.offerlink, "_blank");
      };
      offerList.appendChild(card);
    });

  } catch (err) {
    console.error("Error fetching offers:", err);
    offerList.innerHTML = "<p>Failed to load offers.</p>";
  }
}

fetchOffers();
</script>
</body>
</html>
